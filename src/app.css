/**
 * @fileoverview Global styles for the XGE Climate Explorer application.
 * Includes Tailwind CSS framework, Mapbox GL styles, custom component styles,
 * accessibility enhancements, mobile optimizations, and performance improvements.
 */

/* ===== FRAMEWORK IMPORTS ===== */
@import 'tailwindcss';
@import 'mapbox-gl/dist/mapbox-gl.css';

/* ===== MAPBOX CUSTOMIZATIONS ===== */

/**
 * Custom styles for interactive map markers.
 * Ensures consistent appearance and proper touch targets across devices.
 */
.marker-custom {
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	transition: transform 0.2s ease-in-out;
}

/**
 * Hover effect for map markers on desktop devices.
 * Provides visual feedback for interactive elements.
 */
.marker-custom:hover {
	transform: scale(1.1);
}

/**
 * Remove default focus outline for custom marker styling.
 * Accessibility is handled by parent container focus management.
 */
.marker-custom:focus {
	outline: none;
}

/**
 * Active state for map markers to provide tactile feedback.
 */
.marker-custom:active {
	transform: scale(0.95);
}

/* ===== MOBILE OPTIMIZATIONS ===== */

/**
 * Ensure touch targets meet accessibility guidelines (44px minimum).
 * Critical for usability on mobile devices and accessibility compliance.
 */
@media (max-width: 768px) {
	.marker-custom {
		min-width: 44px;
		min-height: 44px;
	}

	/* Disable hover effects on touch devices to prevent sticky states */
	.marker-custom:hover {
		transform: none;
	}
}

/**
 * Enhanced mobile scrolling experience.
 * Provides smooth scrolling and prevents overscroll bounce issues.
 */
.mobile-scroll {
	-webkit-overflow-scrolling: touch;
	overscroll-behavior: contain;
	scroll-behavior: smooth;
}

/* ===== ACCESSIBILITY ENHANCEMENTS ===== */

/**
 * Global focus indicator for keyboard navigation.
 * Ensures all interactive elements have visible focus states.
 */
*:focus-visible {
	outline: 2px solid #3b82f6;
	outline-offset: 2px;
	border-radius: 2px;
}

/**
 * Screen reader only class for accessibility.
 * Hides content visually while keeping it available to screen readers.
 */
.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}

/**
 * Focus variant of screen reader only class.
 * Makes hidden content visible when focused for keyboard navigation.
 */
.sr-only:focus {
	position: static;
	width: auto;
	height: auto;
	padding: inherit;
	margin: inherit;
	overflow: visible;
	clip: auto;
	white-space: normal;
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */

/**
 * Hardware acceleration for animations and transforms.
 * Improves performance on mobile devices and older browsers.
 */
.hardware-accelerated {
	transform: translateZ(0);
	will-change: transform;
}

/**
 * Optimize rendering for smooth animations.
 * Applied to frequently animated elements like modals and markers.
 */
.smooth-rendering {
	backface-visibility: hidden;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

/* ===== LAYOUT UTILITIES ===== */

/**
 * Full viewport height utility that accounts for mobile browser UI.
 * Handles dynamic viewport height changes on mobile devices.
 */
.min-h-screen-mobile {
	min-height: 100vh;
	min-height: 100dvh; /* Dynamic viewport height for modern browsers */
}

/**
 * Container for preventing layout shift during loading.
 * Maintains aspect ratio and prevents content jumping.
 */
.aspect-ratio-container {
	position: relative;
	overflow: hidden;
}

.aspect-ratio-container::before {
	content: '';
	display: block;
	padding-top: 56.25%; /* 16:9 aspect ratio */
}

.aspect-ratio-container > * {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}

/* ===== PRINT STYLES ===== */

/**
 * Print-friendly styles for better documentation printing.
 * Ensures proper visibility and removes interactive elements.
 */
@media print {
	.no-print {
		display: none !important;
	}

	/* Ensure text remains legible in print */
	* {
		color: black !important;
		background: white !important;
	}

	/* Show URLs for links in print */
	a[href]:after {
		content: ' (' attr(href) ')';
		font-size: 0.8em;
		color: #666 !important;
	}
}

/* ===== REDUCED MOTION SUPPORT ===== */

/**
 * Respect user's motion preferences for accessibility.
 * Reduces or disables animations for users with motion sensitivity.
 */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}

	/* Disable transform animations for reduced motion */
	.marker-custom:hover,
	.marker-custom:active {
		transform: none !important;
	}
}
